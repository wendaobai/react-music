webpackJsonp([16],{768:function(e,t,a){function o(e){a(780)}var i=a(4)(a(769),a(783),o,null,null);e.exports=i.exports},769:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(21),i=a.n(o);t.default={data:function(){return{cpaForm:{cpaSearch:"",cpaList:[]},cpaSortListAll:[],cpaSortList:[],isIndeterminate:!1,checkAll:!1}},props:["cpadata","cpaChecked"],methods:{init:function(){this.cpaForm={cpaSearch:"",cpaList:[]},this.isIndeterminate=!1,this.checkAll=!1,this.doCpaSearch()},doCpaSearch:function(){var e=this,t=JSON.parse(i()({key:this.cpaSortListAll})).key;for(var a in t){var o=t[a],s=o.item.concat([]);o.item=s.filter(function(t){return t.name.toLowerCase().indexOf(e.cpaForm.cpaSearch.trim().toLowerCase())>-1})}this.cpaSortList=t},handleCheckAllChange:function(e){var t=[];for(var a in this.cpaSortList)for(var o in this.cpaSortList[a].item)t.push(this.cpaSortList[a].item[o].code);this.cpaForm.cpaList=e?t:[],this.isIndeterminate=!1},handleCheckedChange:function(e){var t=[];for(var a in this.cpaSortList)for(var o in this.cpaSortList[a].item)t.push(this.cpaSortList[a].item[o].code);var i=e.length;this.checkAll=i===t.length,this.isIndeterminate=i>0&&i<t.length}},created:function(){if(this.cpadata.length>0){var e=this.cpadata.concat([]),t=[];this.cpaSortListAll=[];var a=[];for(var o in e)!function(o){var i=e[o];i.show=!0;var s=i.name.split("-")[0];a.includes(s)||(a.push(s),t.push({cate:s,item:[]}));var n=a.findIndex(function(e){return e==s});t[n].item.push(i)}(o);this.cpaSortList=t,this.cpaSortListAll=JSON.parse(i()({key:t})).key}this.cpaChecked.length>0?(this.init(),this.cpaForm.cpaList=this.cpaChecked,this.isIndeterminate=!0,this.checkAll=this.cpaChecked===this.cpadata.length):(this.init(),this.cpaForm.cpaList=this.cpaChecked)},watch:{cpaChecked:function(e){this.init(),this.cpaForm.cpaList=e,this.checkAll=this.cpaChecked===this.cpadata.length,this.isIndeterminate=this.cpaChecked>0&&this.cpaChecked<this.cpadata.length}}}},777:function(e,t,a){t=e.exports=a(728)(!0),t.push([e.i,".cpa-form .el-checkbox{margin-bottom:10px;width:215px;margin-right:10px}.cpa-form .el-checkbox__label{font-size:14px;padding-left:5px;word-break:break-all;display:inline-block;width:195px;height:auto;vertical-align:top;word-wrap:break-word;white-space:normal;text-align:left}.cpa-form .el-checkbox__input{vertical-align:top;margin-top:4px}.cpa-form .list-item{margin-bottom:10px;position:relative;padding-left:120px}.cpa-form .list-item .item{padding:0}.cpa-form .list-item .item-label{position:absolute;top:0;left:10px;width:100px;word-break:break-all;word-wrap:break-word;white-space:normal;text-align:right;font-size:12px;font-weight:700;color:#222;margin-top:0;line-height:normal}.cpa-form .search-bar{margin-bottom:15px}.cpa-form .search-bar .bar-name{width:110px;display:inline-block;text-align:right}.cpa-form .search-bar .el-input--small{width:250px;margin-left:6px}.cpa-form .el-checkbox+.el-checkbox{margin-left:0}","",{version:3,sources:["D:/mywebstorm/admin-sys/src/components/sys/goods/cpa-push.vue"],names:[],mappings:"AACA,uBACE,mBAAoB,AACpB,YAAa,AACb,iBAAmB,CACpB,AACD,8BACE,eAAgB,AAChB,iBAAkB,AAClB,qBAAsB,AACtB,qBAAsB,AACtB,YAAa,AACb,YAAa,AACb,mBAAoB,AACpB,qBAAsB,AACtB,mBAAqB,AACrB,eAAiB,CAClB,AACD,8BACE,mBAAoB,AACpB,cAAgB,CACjB,AACD,qBACE,mBAAoB,AACpB,kBAAmB,AACnB,kBAAoB,CACrB,AACD,2BACE,SAAW,CACZ,AACD,iCACE,kBAAmB,AACnB,MAAS,AACT,UAAW,AACX,YAAa,AACb,qBAAsB,AACtB,qBAAsB,AACtB,mBAAqB,AACrB,iBAAkB,AAClB,eAAgB,AAChB,gBAAiB,AACjB,WAAY,AACZ,aAAgB,AAChB,kBAAoB,CACrB,AACD,sBACE,kBAAoB,CACrB,AACD,gCACE,YAAa,AACb,qBAAsB,AACtB,gBAAkB,CACnB,AACD,uCACE,YAAa,AACb,eAAiB,CAClB,AACD,oCACE,aAAe,CAChB",file:"cpa-push.vue",sourcesContent:["\n.cpa-form .el-checkbox {\n  margin-bottom: 10px;\n  width: 215px;\n  margin-right: 10px;\n}\n.cpa-form .el-checkbox__label {\n  font-size: 14px;\n  padding-left: 5px;\n  word-break: break-all;\n  display: inline-block;\n  width: 195px;\n  height: auto;\n  vertical-align: top;\n  word-wrap: break-word;\n  white-space: initial;\n  text-align: left;\n}\n.cpa-form .el-checkbox__input {\n  vertical-align: top;\n  margin-top: 4px;\n}\n.cpa-form .list-item {\n  margin-bottom: 10px;\n  position: relative;\n  padding-left: 120px;\n}\n.cpa-form .list-item .item {\n  padding: 0;\n}\n.cpa-form .list-item .item-label {\n  position: absolute;\n  top: 0px;\n  left: 10px;\n  width: 100px;\n  word-break: break-all;\n  word-wrap: break-word;\n  white-space: initial;\n  text-align: right;\n  font-size: 12px;\n  font-weight: 700;\n  color: #222;\n  margin-top: 0px;\n  line-height: normal;\n}\n.cpa-form .search-bar {\n  margin-bottom: 15px;\n}\n.cpa-form .search-bar .bar-name {\n  width: 110px;\n  display: inline-block;\n  text-align: right;\n}\n.cpa-form .search-bar .el-input--small {\n  width: 250px;\n  margin-left: 6px;\n}\n.cpa-form .el-checkbox + .el-checkbox {\n  margin-left: 0;\n}\n"],sourceRoot:""}])},780:function(e,t,a){var o=a(777);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(729)("20a2c7cd",o,!0)},783:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap-cpa-push"},[a("div",{staticClass:"cpa-form"},[a("div",{staticClass:"search-bar"},[a("span",{staticClass:"bar-name"},[e._v("合作平台")]),e._v(" "),a("el-input",{attrs:{placeholder:"搜索",size:"small",clearable:""},on:{change:e.doCpaSearch},model:{value:e.cpaForm.cpaSearch,callback:function(t){e.$set(e.cpaForm,"cpaSearch",t)},expression:"cpaForm.cpaSearch"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("div",{staticClass:"checked-all",staticStyle:{"padding-left":"118px"}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")])],1),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.cpaForm.cpaList,callback:function(t){e.$set(e.cpaForm,"cpaList",t)},expression:"cpaForm.cpaList"}},e._l(e.cpaSortList,function(t){return t.item.length>0?a("div",{key:t.cate,staticClass:"list-item"},[a("div",{staticClass:"item-label"},[e._v(e._s(t.cate))]),e._v(" "),a("div",{staticClass:"item"},e._l(t.item,function(t){return a("el-checkbox",{key:t.code,attrs:{label:t.code}},[e._v("\r\n                    "+e._s(t.name))])}))]):e._e()}))],1)])},staticRenderFns:[]}},802:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(21),i=a.n(o);t.default={props:["search","userType"],data:function(){return{goodsLoad:!1,linkList:[],dialogLink:!1,loading:!0,timer:"",dialogForm:!1,processType:"1"}},computed:{downloadkey:function(){return i()({head:{version:"1.0.0",timeStamp:this.format.asString("yyyyMMddhhmmss",new Date)},body:JSON.parse(i()(this.search))})}},methods:{handldBeforeUpload:function(){this.goodsLoad=!0},handleSuccess:function(e){if(this.goodsLoad=!1,"10000"==e.head.code)this.$message.success("商品导入成功！");else if("40001"==e.head.code){var t="",a=e.body.sub_msg.split(";");for(var o in a)""!=a[o]&&(t+="<div>"+a[o]+"</div>");this.$alert("<div>"+t+"</div>","错误提示",{dangerouslyUseHTMLString:!0,customClass:"message-goods-import"})}else this.$message.error(e.body.sub_msg)},download:function(){var e=this;this.$confirm("您确定要导出此商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){document.getElementById("form-download").submit()}).catch(function(){e.$message({type:"info",message:"已取消"})})},search_export:function(){var e=this;this.dialogForm=!1;var t=JSON.parse(i()(this.search));t.processType=this.processType,this.axios.post("/proxy/goods-upload/api/goods/down/process",{body:t}).then(function(t){"10000"==t.data.head.code&&e.$message({message:"商品正在导出,可点击查看进度按钮，查看导出进度",type:"success",showClose:!0,duration:5e3})})},showProgress:function(){var e=this;clearInterval(this.timer),this.loading=!0,this.axios.get("/proxy/goods-upload/api/goods/down/info",{}).then(function(t){var a=t.data;e.loading=!1,e.dialogLink=!0,"10000"==a.head.code&&(e.linkList=a.body.rows)}),this.timer=setInterval(function(){e.loading=!0,setTimeout(function(){e.axios.get("/proxy/goods-upload/api/goods/down/info",{}).then(function(t){var a=t.data;e.loading=!1,e.dialogLink=!0,"10000"==a.head.code&&(e.linkList=a.body.rows)})},200)},5e3)},closeDialog:function(){clearInterval(this.timer)}},filters:{filterStatus:function(e){var t="";switch(e){case 0:t="生成中";break;case 1:t="已生成";break;case 2:t="生成失败,请重新生成"}return t}},created:function(){window.$message=this.$message}}},858:function(e,t,a){t=e.exports=a(728)(!0),t.push([e.i,".wrap-goods-export{display:inline-block}.wrap-goods-export .el-dialog__header{text-align:left}.wrap-goods-export .el-dialog__body,.wrap-goods-export .el-dialog__footer{text-align:center}.wrap-goods-export .radio1{margin-right:100px}.wrap-goods-export .upload-goods{display:inline-block}.message-goods-import .el-message-box__message{max-height:300px;overflow-y:auto}","",{version:3,sources:["D:/mywebstorm/admin-sys/src/components/sys/goods/goods-export.vue"],names:[],mappings:"AACA,mBACE,oBAAsB,CACvB,AACD,sCACE,eAAiB,CAClB,AACD,0EAEE,iBAAmB,CACpB,AACD,2BACE,kBAAoB,CACrB,AACD,iCACE,oBAAsB,CACvB,AACD,+CACE,iBAAkB,AAClB,eAAiB,CAClB",file:"goods-export.vue",sourcesContent:["\n.wrap-goods-export {\n  display: inline-block;\n}\n.wrap-goods-export .el-dialog__header {\n  text-align: left;\n}\n.wrap-goods-export .el-dialog__footer,\n.wrap-goods-export .el-dialog__body {\n  text-align: center;\n}\n.wrap-goods-export .radio1 {\n  margin-right: 100px;\n}\n.wrap-goods-export .upload-goods {\n  display: inline-block;\n}\n.message-goods-import .el-message-box__message {\n  max-height: 300px;\n  overflow-y: auto;\n}\n"],sourceRoot:""}])},905:function(e,t,a){var o=a(858);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(729)("02a965a2",o,!0)},945:function(e,t,a){function o(e){a(905)}var i=a(4)(a(802),a(954),o,null,null);e.exports=i.exports},954:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap-goods-export"},["supplier"==e.userType?a("el-button",{attrs:{type:"warning"},on:{click:e.download}},[e._v("导出")]):e._e(),e._v(" "),"supplier"==e.userType?a("el-upload",{staticClass:"upload-goods",attrs:{action:"/proxy/goods-upload/api/goods/uploadgoodsskuinfo",accept:"file/file.xls","on-success":e.handleSuccess,"before-upload":e.handldBeforeUpload,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"success",loading:e.goodsLoad}},[e._v("导入更新")])],1):e._e(),e._v(" "),"admin"==e.userType?a("el-button",{attrs:{type:"warning"},on:{click:function(t){e.dialogForm=!0}}},[e._v("导出")]):e._e(),e._v(" "),"admin"==e.userType?a("el-button",{attrs:{type:"info"},on:{click:e.showProgress}},[e._v("查看进度")]):e._e(),e._v(" "),a("div",{staticClass:"form-download"},[a("iframe",{staticStyle:{display:"none"},attrs:{src:"",frameborder:"0",name:"msg-iframe"}}),e._v(" "),a("form",{staticStyle:{display:"none"},attrs:{action:"/proxy/fv/supplier/goods.php?act=downloadGoodsSkuList",method:"post",id:"form-download",target:"msg-iframe"}},[a("input",{attrs:{type:"text",name:"data",id:"form-data"},domProps:{value:e.downloadkey}}),e._v(" "),a("button",{attrs:{type:"submit"}},[e._v("submit")])])]),e._v(" "),a("el-dialog",{attrs:{title:"商品导出进度",visible:e.dialogLink,width:"80%"},on:{"update:visible":function(t){e.dialogLink=t},close:e.closeDialog}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"report",attrs:{data:e.linkList,border:"",stripe:"","max-height":"400"}},[a("el-table-column",{attrs:{type:"index",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"downTime",label:"生成时间",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e._f("filterStatus")(t.row.status))+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"生成数量",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileName",label:"文件名称","min-width":"280"}}),e._v(" "),a("el-table-column",{staticClass:"download",attrs:{prop:"url",label:"下载"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("a",{staticStyle:{color:"#20A0FF"},attrs:{href:t.row.url,target:"_blank",download:t.row.fileName}},[e._v("点击下载")]):e._e()]}}])})],1)],1),e._v(" "),a("el-dialog",{staticStyle:{"text-algin":"center"},attrs:{title:"请选择导出格式",visible:e.dialogForm},on:{"update:visible":function(t){e.dialogForm=t}}},[a("el-radio",{staticClass:"radio1",attrs:{label:"1"},model:{value:e.processType,callback:function(t){e.processType=t},expression:"processType"}},[e._v("SKU竖排")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"2"},model:{value:e.processType,callback:function(t){e.processType=t},expression:"processType"}},[e._v("SKU横排")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogForm=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search_export}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=16.457fa65a7ec93804a4f4.js.map